<template>
    <router-link class="m-adventure-item" :to="'/' + item.dwID">
        <!-- @click="getLink(item.dwID)" -->
        <img class="u-default" :src="defaultImg" />
        <img class="u-title" :src="titleImg" :style="titleStyle" />
        <span class="u-img" :style="imgStyle(imgName)"></span>
        <span class="u-icon"></span>
    </router-link>
</template>

<script>
import { __iconPath, __imgPath,__ossMirror } from "@jx3box/jx3box-common/data/jx3box";
import {showGamePic} from '@jx3box/jx3box-common/js/utils'
export default {
    name: "item",
    props: ["item"],
    components: {},
    data: function () {
        return {
            imgRoot: __iconPath + "pvx/serendipity/images/",
            // imgRoot: __ossMirror + "game/serendipity/images/",
        };
    },
    computed: {
        link: function () {
            return "/adventure/" + this.item.dwID;
        },
        imgName: function () {
            let link = this.item.szOpenRewardPath?.replaceAll("\\", "\/");
            if (link?.indexOf("tga") == -1) return link;
            let reg = /(.*)\/(.*)\.tga/gi;
            let result = reg.exec(link);
            let open = result?.[1].split("reward");
            return open?.[1] + "/" + result?.[2];
        },
        defaultImg: function () {
            return __imgPath + "image/pvx/bg.png";
        },
        titleImg: function () {
            return __iconPath + "pvx/serendipity/image_ui/luckymeeting7_" + this.item.nOpenFrame + ".png";
            // return __ossMirror + "game/serendipity/image_ui/luckymeeting7_" + this.item.nOpenFrame + ".png";
        },
        titleStyle: function () {
            return {};
        },
    },
    methods: {
        imgUrl: function (val) {
            return this.imgRoot + "reward/" + val + ".png";
        },
        getLink(adventure_id) {
            this.$router.push({ name: "single", params: { id: adventure_id } });
        },
        imgStyle: function (imgName) {
            return {
                backgroundImage: "url(" + this.imgUrl(imgName) + ")",
            };
        },
    },
    filters: {},
    mounted: function () {
    },
};
</script>
